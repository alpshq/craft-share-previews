<div class="space-y-8">
    {% for layerIdx, layer in template.layers|reverse(true) %}
        {{ include('share-previews/template-editor/_add-layers', {
            layers: availableLayers,
            position: layerIdx + 1,
        }) }}

        {{ include('share-previews/template-editor/layers/' ~ layer.type, {
            template,
            layer,
            layerIdx,
            namePrefix: 'template[layers][' ~ layerIdx ~ ']'
        }, with_context = false) }}
    {% endfor %}

    {{ include('share-previews/template-editor/_add-layers', {
        layers: availableLayers,
        position: 0,
    }) }}
</div>